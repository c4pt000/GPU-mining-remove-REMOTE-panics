# GPU-mining-remove-REMOTE-panics
enabling Xorg properly to disable kernel panics on mining program quit

https://github.com/c4pt000/cgminer/releases

# Having a proper xorg.conf installed in /etc/X11/xorg.conf, gdm or lightdm (or equivilent) installed and running
checking Xorg.0.log

check if X is currently running to ensure mining programs dont kernel panic an entire remote system when they quit (or are forced quit)
```
[root@localhost ~]# ps ax | grep X
   4503 tty1     Sl+    0:03 /usr/libexec/Xorg vt1 -displayfd 3 -auth /run/user/42/gdm/Xauthority -nolisten tcp -background none -noreset -keeptty -novtswitch -verbose 3
  10799 pts/0    R+     0:00 grep --color=auto X
[root@localhost ~]# ps ax | grep gdm
   4480 ?        Ssl    0:00 /usr/sbin/gdm
   4484 ?        Sl     0:00 gdm-session-worker [pam/gdm-launch-environment]
   4501 tty1     Ssl+   0:00 /usr/libexec/gdm-x-session dbus-run-session -- gnome-session --autostart /usr/share/gdm/greeter/autostart
   4503 tty1     Sl+    0:03 /usr/libexec/Xorg vt1 -displayfd 3 -auth /run/user/42/gdm/Xauthority -nolisten tcp -background none -noreset -keeptty -novtswitch -verbose 3
   4545 tty1     S+     0:00 dbus-run-session -- gnome-session --autostart /usr/share/gdm/greeter/autostart
   4547 tty1     Sl+    0:00 /usr/libexec/gnome-session-binary --autostart /usr/share/gdm/greeter/autostart
  10861 pts/0    R+     0:00 grep --color=auto gdm
```




lspci -vvv | grep NVI
```
00:02.0 VGA compatible controller: NVIDIA Corporation TU102GL [Quadro RTX 6000/8000] (rev a1) (prog-if 00 [VGA controller])
	Subsystem: NVIDIA Corporation Quadro RTX 6000
00:03.0 VGA compatible controller: NVIDIA Corporation TU102GL [Quadro RTX 6000/8000] (rev a1) (prog-if 00 [VGA controller])
	Subsystem: NVIDIA Corporation Quadro RTX 6000
00:04.0 VGA compatible controller: NVIDIA Corporation TU102GL [Quadro RTX 6000/8000] (rev a1) (prog-if 00 [VGA controller])
	Subsystem: NVIDIA Corporation Quadro RTX 6000
```

taking the active video card and entering the BusID in the Device Section
```
 BusID "0:2:0"
        BusID "0:3:0"
        BusID "0:4:0"
```

a working nvidia xorg.conf with 3 video cards with unique BusIDs

```
nvidia-xconfig: X configuration file generated by nvidia-xconfig
# nvidia-xconfig:  version 470.57.02

Section "ServerLayout"
    Identifier     "Layout0"
    Screen	0  "Screen0"
    InputDevice    "Keyboard0" "CoreKeyboard"
    InputDevice    "Mouse0" "CorePointer"
EndSection

Section "Files"
EndSection

Section "InputDevice"
    # generated from default
    Identifier     "Mouse0"
    Driver         "mouse"
    Option         "Protocol" "auto"
    Option         "Device" "/dev/input/mice"
    Option         "Emulate3Buttons" "no"
    Option         "ZAxisMapping" "4 5"
EndSection

Section "InputDevice"
    # generated from default
    Identifier     "Keyboard0"
    Driver         "kbd"
EndSection

Section "Monitor"
    Identifier     "Monitor0"
    VendorName     "Unknown"
    ModelName	   "Unknown"
    Option         "DPMS"
EndSection

Section "Device"
    Identifier     "Device0"
    Driver         "nvidia"
    VendorName     "NVIDIA Corporation"
        BusID "0:2:0"
        BusID "0:3:0"
        BusID "0:4:0"
EndSection

Section "Screen"
    Identifier     "Screen0"
    Device         "Device0"
    Monitor        "Monitor0"
    DefaultDepth    24
    SubSection     "Display"
        Depth       24
    EndSubSection
EndSection
```




